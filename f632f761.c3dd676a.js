(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{159:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return p}));var a=n(2),i=n(9),r=(n(0),n(163)),o={id:"working-with-files",title:"Working with Files",sidebar_label:"Working with Files"},l={id:"tutorials/working-with-files",isDocsHomePage:!1,title:"Working with Files",description:"Even if the core Solid data model is structured data (see Working with data), a Solid Pod",source:"@site/docs/tutorials/working-with-files.md",permalink:"/lit-pod/docs/tutorials/working-with-files",editUrl:"https://github.com/inrupt/lit-pod/edit/master/website/docs/tutorials/working-with-files.md",sidebar_label:"Working with Files",sidebar:"prose",previous:{title:"Working with Data",permalink:"/lit-pod/docs/tutorials/working-with-data"},next:{title:"Managing Access to Data",permalink:"/lit-pod/docs/tutorials/managing-access"}},s=[{value:"Reading a file",id:"reading-a-file",children:[]},{value:"Deleting a file",id:"deleting-a-file",children:[]},{value:"Writing a file",id:"writing-a-file",children:[{value:"Writing a file directly at a URL",id:"writing-a-file-directly-at-a-url",children:[]},{value:"Saving a file into a parent resource",id:"saving-a-file-into-a-parent-resource",children:[]}]},{value:"Customizing the requests",id:"customizing-the-requests",children:[]}],c={rightToc:s};function p(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"Even if the core Solid data model is ",Object(r.b)("strong",{parentName:"p"},"structured")," data (see ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"./working-with-data"}),"Working with data"),"), a Solid Pod\ncan also act as a regular general-purpose data store. Besides your profile document, your friend list and the likes, your\nPod can also store your photos, PDFs and any other type of file. Note that the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"./managing-access"}),"access restrictions"),"\napply to files the same way they apply to any other ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"../glossary#resource"}),"Resource"),"."),Object(r.b)("p",null,"Like anything else in your Pod, each file is a resource with a distinct URL, which may or may not contain a hint\nsuch as a ",Object(r.b)("inlineCode",{parentName:"p"},".jpg")," extension for a photo. You'll find that the functions available to read and write files to/from\nyour Pod are very close to the browser's ",Object(r.b)("inlineCode",{parentName:"p"},"fetch"),": files are represented as typed ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/docs/Web/API/Blob"}),Object(r.b)("inlineCode",{parentName:"a"},"Blob"),"s"),", and the result of the functions is returned as a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/docs/Web/API/Response"}),Object(r.b)("inlineCode",{parentName:"a"},"Response")),"."),Object(r.b)("div",{className:"admonition admonition-caution alert alert--warning"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"})))),"caution")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"The functions described in this documentation are still early stage, and subject to breaking changes."))),Object(r.b)("h2",{id:"reading-a-file"},"Reading a file"),Object(r.b)("p",null,"Reading a file is just a matter of fetching the content available at a certain URL. You get a ",Object(r.b)("inlineCode",{parentName:"p"},"Response")," in return, which contains\nthe fetched file as a blob. It is then up to you to decode it appropriately."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { unstable_fetchFile } from "lit-solid";\n\nconst response = await unstable_fetchFile(\n  "https://example.com/some/interesting/file"\n);\nif (response.ok) {\n  const myFile = await response.blob();\n}\n')),Object(r.b)("h2",{id:"deleting-a-file"},"Deleting a file"),Object(r.b)("p",null,"Deleting a file is also a simple operation: you just erase the content available at a certain URL."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { unstable_fetchFile } from "lit-solid";\n\nconst response = await unstable_deleteFile(\n  "https://example.com/some/boring/file"\n);\nif (response.ok) {\n  console.log("File deleted !");\n}\n')),Object(r.b)("h2",{id:"writing-a-file"},"Writing a file"),Object(r.b)("p",null,"There are two approaches to writing files:"),Object(r.b)("ol",null,Object(r.b)("li",{parentName:"ol"},"you know exactly at which URL your file should be saved (potentially overwriting any data that sat there previously)"),Object(r.b)("li",{parentName:"ol"},"you know what ",Object(r.b)("a",Object(a.a)({parentName:"li"},{href:"../glossary#container"}),"Container")," should be the parent of your file, like saving it into a folder.")),Object(r.b)("h3",{id:"writing-a-file-directly-at-a-url"},"Writing a file directly at a URL"),Object(r.b)("p",null,"With this approach, if the request succeeds, you know exactly what the URL of your file is."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { unstable_overwriteFile } from "lit-solid";\n\nconst response = await unstable_overwriteFile(\n  "https://example.com/some/new/file",\n  new Blob(["This is a plain piece of text"], { type: "plain/text" })\n  // Or in Node:\n  // Buffer.from("This is a plain piece of text", "utf8"), { type: "plain/text" })\n);\nif (response.ok) {\n  console.log("File saved !");\n}\n')),Object(r.b)("h3",{id:"saving-a-file-into-a-parent-resource"},"Saving a file into a parent resource"),Object(r.b)("p",null,"With this approach, you kindly ask the server to come up with a name for your file, potentially using a ",Object(r.b)("inlineCode",{parentName:"p"},"slug")," if you\nprovide one. Note that there is no guarantee about how the server will use the ",Object(r.b)("inlineCode",{parentName:"p"},"slug"),", if at all. In any case, if the ",Object(r.b)("inlineCode",{parentName:"p"},"slug"),"\nyou provide matches a file that already exists under the same target resource, the server will create a new name for your\nfile so that no content is overwritten."),Object(r.b)("p",null,"This means that you don't control the final name of your file though. To keep track of the name the server gave to your\nfile, you'll have to look up the ",Object(r.b)("inlineCode",{parentName:"p"},"Location")," header in the response, as shown in the code snippet below:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { unstable_saveFileInContainer } from "lit-solid";\n\nconst response = await unstable_saveFileInContainer(\n  "https://example.com/some/folder",\n  new Blob(["This is a plain piece of text"], { type: "plain/text" }),\n  { slug: "new-file" }\n);\nif (response.ok) {\n  const headers = await response.headers;\n  console.log(`File saved at ${headers.get("Location")}`);\n}\n')),Object(r.b)("p",null,"Note that the returned ",Object(r.b)("inlineCode",{parentName:"p"},"Location")," will be relative to the server's origin, so in the previous example ",Object(r.b)("inlineCode",{parentName:"p"},"Location")," might\nbe ",Object(r.b)("inlineCode",{parentName:"p"},"/some/folder/new-file-3869a250"),", which means the file is saved at the URL ",Object(r.b)("inlineCode",{parentName:"p"},"https://example.com/some/folder/new-file-3869a250"),"."),Object(r.b)("h2",{id:"customizing-the-requests"},"Customizing the requests"),Object(r.b)("p",null,"If you need to customize the request eventually sent to the server, you can do so by using the optional ",Object(r.b)("inlineCode",{parentName:"p"},"init")," parameter.\n",Object(r.b)("inlineCode",{parentName:"p"},"init")," conforms to the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://developer.mozilla.org/docs/Web/API/WindowOrWorkerGlobalScope/fetch#Parameters"}),Object(r.b)("inlineCode",{parentName:"a"},"init")," parameter")," of the ",Object(r.b)("inlineCode",{parentName:"p"},"fetch")," API. For instance, the following code snippet sets a custom\nheader."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-typescript"}),'import { unstable_fetchFile } from "lit-solid";\n\nconst response = await unstable_deleteFile(\n  "https://example.com/some/boring/file",\n  {\n    init: {\n      headers: {\n        "My-Custom-Header": "Some fancy value",\n      },\n    },\n  }\n);\n')),Object(r.b)("p",null,"Note that some headers are used by the library, and should not be set manually:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Content-Type")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"Slug")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"If-None-Match"),".")),Object(r.b)("p",null,"Likewise, the ",Object(r.b)("inlineCode",{parentName:"p"},"method")," field is reserved for the library, and should not be set in the optional ",Object(r.b)("inlineCode",{parentName:"p"},"init")," parameter."))}p.isMDXComponent=!0},163:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=i.a.createContext({}),p=function(e){var t=i.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=p(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,o=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),b=p(n),u=a,h=b["".concat(o,".").concat(u)]||b[u]||d[u]||r;return n?i.a.createElement(h,l(l({ref:t},c),{},{components:n})):i.a.createElement(h,l({ref:t},c))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,o=new Array(r);o[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<r;c++)o[c]=n[c];return i.a.createElement.apply(null,o)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);